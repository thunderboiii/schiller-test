const { port1, port2 } = new MessageChannel();
port2.start();
export const browserTask = () => {
    return new Promise((resolve) => {
        const uid = Math.random();
        const onMessage = (event) => {
            if (event.data !== uid) {
                return;
            }
            port2.removeEventListener('message', onMessage);
            resolve();
        };
        port2.addEventListener('message', onMessage);
        port1.postMessage(uid);
    });
};
//# sourceMappingURL=browser-task.js.map