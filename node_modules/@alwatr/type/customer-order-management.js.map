{"version":3,"file":"customer-order-management.js","sourceRoot":"","sources":["src/customer-order-management.ts"],"names":[],"mappings":"AAMA,oBAAoB;AAEpB,MAAM,CAAC,MAAM,YAAY,GAAG,CAAC,MAAM,EAAE,QAAQ,CAAU,CAAC;AAGxD,MAAM,CAAC,MAAM,SAAS,GAAG;IACvB,eAAe;IACf,aAAa;IACb,aAAa;IACb,YAAY;IACZ,YAAY;IACZ,YAAY;IACZ,aAAa;IACb,QAAQ;CACA,CAAC;AAGX,MAAM,CAAC,MAAM,YAAY,GAAG,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,CAAU,CAAC;AAGtE,MAAM,CAAC,MAAM,cAAc,GAAG,CAAC,QAAQ,EAAE,SAAS,CAAU,CAAC;AAG7D,MAAM,CAAC,MAAM,aAAa,GAAG;IAC3B,OAAO;IACP,YAAY;IACZ,YAAY;IACZ,iBAAiB;IACjB,WAAW;IACX,UAAU;IACV,SAAS;IACT,SAAS;IACT,UAAU;IACV,UAAU;CACF,CAAC;AAGX,MAAM,CAAC,MAAM,iBAAiB,GAAG,CAAC,YAAY,EAAE,aAAa,EAAE,eAAe,EAAE,0BAA0B,CAAU,CAAC;AA8IrH,eAAe;AAEf,MAAM,CAAC,MAAM,eAAe,GAAG;IAC7B,EAAE,EAAE,MAAM;IACV,MAAM,EAAE,MAAM;IACd,QAAQ,EAAE;QACR;YACE,SAAS,EAAE,MAAM;YACjB,WAAW,EAAE,MAAM;YACnB,WAAW,EAAE,MAAM;YACnB,GAAG,EAAE,MAAM;SACZ;KACF;IACD,YAAY,EAAE;QACZ,aAAa,EAAE,MAAM;QACrB,qBAAqB,EAAE,MAAM;QAC7B,OAAO,EAAE,MAAM;QACf,OAAO,EAAE,MAAM;QACf,UAAU,EAAE,MAAM;QAClB,UAAU,EAAE,MAAM;QAClB,uBAAuB;KACxB;IACD,oBAAoB;IACpB,wBAAwB;IACxB,cAAc,EAAE,MAAM;IACtB,cAAc,EAAE,MAAM;IACtB,SAAS,EAAE,MAAM;IACjB,UAAU,EAAE,MAAM;IAClB,WAAW,EAAE,MAAM;IACnB,gBAAgB,EAAE,MAAM;CACzB,CAAC;AAEF,MAAM,CAAC,MAAM,uBAAuB,GAAG,eAAe,CAAC,YAAY,CAAC","sourcesContent":["import type {MultiLangStringObj} from './i18n.js';\nimport type {Photo} from './photo.js';\nimport type {AlwatrDocumentObject} from './storage.js';\nimport type {StringifyableRecord} from './type-helper.js';\nimport type {User} from './user.js';\n\n// -- Const value --\n\nexport const ladingTypeCS = ['hand', 'pallet'] as const;\nexport type LadingType = (typeof ladingTypeCS)[number];\n\nexport const carTypeCS = [\n  'trailer_truck',\n  'camion_dual',\n  'camion_solo',\n  'camion_911',\n  'camion_800',\n  'camion_600',\n  'camion_mini',\n  'nissan',\n] as const;\nexport type CarType = (typeof carTypeCS)[number];\n\nexport const timePeriodCS = ['auto', '3_4w', '2_3w', '1_2w'] as const;\nexport type TimePeriod = (typeof timePeriodCS)[number];\n\nexport const discountTypeCS = ['number', 'percent'] as const;\nexport type DiscountType = (typeof discountTypeCS)[number];\n\nexport const orderStatusCS = [\n  'draft',\n  'registered',\n  'processing',\n  'payment_pending',\n  'preparing',\n  'shipping',\n  'delayed',\n  'on_hold',\n  'canceled',\n  'refunded',\n] as const;\nexport type OrderStatus = (typeof orderStatusCS)[number];\n\nexport const userPermissionsCS = ['user/patch', 'price/patch', 'product/patch', 'user-list-inc-order/read'] as const;\nexport type UserPermission = (typeof userPermissionsCS)[number];\n\n// -- Document object --\n\nexport interface Product extends AlwatrDocumentObject {\n  /**\n   * Product global unique id.\n   */\n  id: string;\n\n  /**\n   * Product title\n   */\n  title: MultiLangStringObj;\n\n  /**\n   * Product image\n   */\n  image: Photo;\n}\n\nexport interface ProductPrice extends AlwatrDocumentObject {\n  /**\n   * Product global unique id.\n   */\n  id: string;\n\n  /**\n   * Product price in this list.\n   */\n  price: number;\n}\n\nexport interface Order extends AlwatrDocumentObject {\n  /**\n   * Order auto incremental unique id.\n   */\n  id: string;\n\n  /**\n   * Order Status\n   */\n  status: OrderStatus;\n\n  /**\n   * Order cart list.\n   */\n  itemList: OrderItem[];\n\n  /**\n   * Delivery info\n   */\n  shippingInfo: Partial<OrderShippingInfo>;\n\n  // discount: number;\n  // discountType: DiscountType;\n\n  /**\n   * The total price of this order exclude shippings.\n   */\n  subTotalMarket: number;\n\n  subTotalAgency: number;\n\n  /**\n   * The cost of lading the order.\n   */\n  ladingFee: number;\n\n  /**\n   * The cost of pallet.\n   */\n  palletCost: number;\n\n  /**\n   * The cost of shipping price.\n   */\n  shippingFee: number;\n\n  /**\n   * Total shipping const.\n   */\n  totalShippingFee: number;\n\n  /**\n   * Customer device uuid.\n   */\n  clientId: string;\n\n  /**\n   * Customer device ip address.\n   */\n  remoteAddress: string;\n}\n\nexport interface OrderDraft extends Partial<Order> {\n  id: 'new';\n  status: 'draft';\n}\n\n// -- child types --\n\nexport interface OrderItem extends StringifyableRecord {\n  productId: string;\n\n  /**\n   * The selling price of single product in the market.\n   */\n  marketPrice: number;\n\n  /**\n   * The selling price of a product after any discounts to this buyer.\n   */\n  agencyPrice: number;\n\n  /**\n   * Quantity of this item.\n   */\n  qty: number;\n}\n\nexport interface OrderShippingInfo extends StringifyableRecord {\n  recipientName: string;\n  recipientNationalCode: string;\n  address: string;\n  description: string;\n  ladingType: LadingType;\n  carType: CarType;\n  timePeriod: TimePeriod;\n}\n\nexport interface ComUser extends User {\n  permissions?: UserPermission[] | 'root';\n  shopName?: string;\n  priceListName?: string;\n}\n\nexport interface ComUserIncOrder extends ComUser {\n  orderList: Record<string, Order>;\n}\n\n// -- Schema --\n\nexport const orderInfoSchema = {\n  id: String,\n  status: String,\n  itemList: [\n    {\n      productId: String,\n      marketPrice: Number,\n      agencyPrice: Number,\n      qty: Number,\n    },\n  ],\n  shippingInfo: {\n    recipientName: String,\n    recipientNationalCode: String,\n    address: String,\n    carType: String,\n    ladingType: String,\n    timePeriod: String,\n    // description: String,\n  },\n  // discount: Number,\n  // discountType: String,\n  subTotalMarket: Number,\n  subTotalAgency: Number,\n  ladingFee: Number,\n  palletCost: Number,\n  shippingFee: Number,\n  totalShippingFee: Number,\n};\n\nexport const orderShippingInfoSchema = orderInfoSchema.shippingInfo;\n"]}